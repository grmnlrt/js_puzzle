<!DOCTYPE html>
<html>
<head>
  <title>JS Puzzle</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="application.css">
</head>
<body>
  <div id="puzzle-container">
    <div class="piece">1</div>
    <div class="piece">2</div>
    <div class="piece">3</div>
    <div class="piece">4</div>
    <div class="piece">5</div>
    <div class="piece">6</div>
    <div class="piece">7</div>
    <div class="piece">8</div>
    <div class="piece">9</div>
    <div class="piece">10</div>
    <div class="piece">11</div>
    <div class="piece">12</div>
    <div class="piece">13</div>
    <div class="piece">14</div>
    <div class="piece">15</div>
    <div class="piece empty"></div>
  </div>

  <script>
    function shuffle(a) {
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    const pieces = Array.from(document.querySelectorAll('.piece'));
    const puzzle = document.querySelector('#puzzle-container');

    puzzle.innerHTML = '';
    puzzle.insertAdjacentHTML('beforeend', '<div class="line" data-line-number="1"></div>');
    puzzle.insertAdjacentHTML('beforeend', '<div class="line" data-line-number="2"></div>');
    puzzle.insertAdjacentHTML('beforeend', '<div class="line" data-line-number="3"></div>');
    puzzle.insertAdjacentHTML('beforeend', '<div class="line" data-line-number="4"></div>');

    let counter = 0;
    shuffle(pieces).forEach((piece) => {
      let lineNumber = Math.floor(1 + counter);
      puzzle.querySelector(`[data-line-number="${lineNumber}"]`).insertAdjacentHTML('beforeend', piece.outerHTML);
      counter += 0.25;
    });
  </script>
  <script src="build/application.js"></script>
</body>
</html>
